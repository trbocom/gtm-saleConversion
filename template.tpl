___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "trbo Sale Conversion",
  "categories": ["MARKETING", "SALES", "PERSONALIZATION"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAAC1CAYAAAAZU76pAAAEs2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjE4MSIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4MSIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICB0aWZmOkltYWdlV2lkdGg9IjE4MSIKICAgdGlmZjpJbWFnZUxlbmd0aD0iMTgxIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi4wIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi4wIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDIx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4NwsTXquXTPaLPMl8uUkJqK6eg3eAtxd075j2wCcmaXJ34zb/Rj4fQ35qcMm4BNZmvy5X8IRgGJs3RLyPskTTS0lddGN9UKam2KrqtXAqVmaZNYNi3M8j4Z6Xg5gHZBmaXJfmcTbG9CLivdJtP9LHKuWpd1GFX2RPwjcVdcxBrCFfG3IY7I0sa7StV1RoJ1A/3btYdgKXAscnaXJP8tutMs0Y8XYvC+Tr9FX16L2sazM0sTy5rGy4u3eUppZ4rqXV4BbgeuLB9ooisEiFwJfxTYfdx02ArcB12ZpYq5edp07r3hVvZi8D8ZC8j6uC7DN1Vy3u7I0WdzkAZ0PpwEnk/f3Xlj8bVm5y+Il8qrByuLvh8hfrJRdHtmsCO7TyUvvRez47i1ra1q8RH5+o38eAu7O0uS1qju0TAg5esLzyN8iVX2FG9OaLE2GXh90PiTkP/iqr9fHe5X8LtTULFh9OR/mki//FqvT1kbgiT7DzUREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREpIz/A6LJV5urrNGYAAAAAElFTkSuQmCC"
  },
  "description": "Hiermit misst trbo für die einzelnen Produkte bspw. die Conversion Rate oder identifiziert die Top Seller Ihres Shops.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "orderId",
    "displayName": "ID der Bestellung / Bestellnummer",
    "simpleValueType": true,
    "help": "Bestellnummer als String",
    "valueHint": "\"845654ADF54\"",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "value",
    "displayName": "Wert der Conversion",
    "simpleValueType": true,
    "help": "Der Wert des Einkaufs als Float",
    "valueHint": "229.40",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "currency",
    "displayName": "Währung",
    "simpleValueType": true,
    "help": "Die Währung als String",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "defaultValue": "\"EUR\""
  },
  {
    "type": "TEXT",
    "name": "couponCode",
    "displayName": "Gutscheincode",
    "simpleValueType": true,
    "help": "Ein Gutscheincode als String",
    "defaultValue": "\"n/a\""
  },
  {
    "type": "TEXT",
    "name": "products",
    "displayName": "Produkte",
    "simpleValueType": true,
    "help": "Gekaufte Produktobjekte in einem Array: [ \t\t\t{ \t\t\tproduct_id: {{addedProductId}}, \t\t\tname: {{addedProductName}}, \t\t\tquantity: {{addedProductQuantity}}, \t\t\tprice: {{addedProductPrice}} \t\t\t} \t\t]",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "valueHint": "{{products}}"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Vorlagencode hier eingeben.
const createQueue = require('createQueue');
const products = data.products;
const value = data.value;
const currency = data.currency;
const orderId = data.orderId;
const couponCode = data.couponCode;

const trboqPush = createQueue('_trboq');
if(typeof products !== "undefined" && products.length > 0){
    trboqPush(["basket",
		{
        order_id: orderId,
		value: value,
		currency: currency,
        coupon_code: couponCode,
		products: products
        }
    ]);
}

// data.gtmOnSuccess aufrufen, wenn das Tag fertig ist.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_trboq"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 2.7.2021, 13:28:25


